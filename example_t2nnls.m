clear all; close all;pkg load image;addpath('utils');load('data/t2mapping.mat');% 20130927testImage = squeeze(imgs(:,:,1));figure();imagesc(imresize(testImage, [1024 512], 'cubic'));colormap gray;set(gca, 'xtick', [], 'ytick', []);NTE = 20;TE = 0.013 * size(imgs,2); % effective TE of each image, ignoring half image durationsTElist = (1:NTE) * TE;T2Range = [.10 20];T2Samples = 200;doPlot = 1;regularizationType = 0; % 0 = none, 1 = L1, 2 = L2regularizationLambda = 1e-2;testpixel = squeeze(imgs(64, 42, :));testpixel = squeeze(imgs(64, 18, :));[T2Spectra, k, sfit] = t2nnls(testpixel, TElist, doPlot, T2Range, T2Samples, regularizationType, regularizationLambda);